<?php

/**
 * Implements hook_cron().
 */
function radio_station_cron() {
  $station = new RadioStation();
  $station->createNextEpisodes(5);

  # Todo
  # 1. schedule ripping if show starts in less 1 hour
  # 2. after ripping, attach media to episode
  # 3. delete any older media as needed
}


/**
 * Implements hook_menu().
 */
function radio_station_menu() {
  $routes = RadioStationCallbacks::buildRoutes();
  return $routes;
}


function radio_station_get_episode($stream, $direction, $timestamp) {
  $data = RadioStationCallbacks::getEpisode($stream, $direction, $timestamp);
  drupal_json_output($data);
}


function radio_station_get_day($stream, $direction, $timestamp) {
  $data = RadioStationCallbacks::getDay($stream, $direction, $timestamp);
  drupal_json_output($data);
}


function radio_station_get_week($stream, $direction, $timestamp) {
  $data = RadioStationCallbacks::getWeek($stream, $direction, $timestamp);
  drupal_json_output($data);
}


function radio_station_get_schedule($stream) {
  return RadioStationCallbacks::getSchedule($stream);
}


function radio_station_theme() {
  return RadioStationCallbacks::getTemplates();
}
